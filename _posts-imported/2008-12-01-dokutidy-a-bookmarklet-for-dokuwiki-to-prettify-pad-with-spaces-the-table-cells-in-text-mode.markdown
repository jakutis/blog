---
layout: post
title: !binary |-
  RG9rdVRpZHk6IEEgYm9va21hcmtsZXQgZm9yIERva3VXaWtpIHRvIHByZXR0
  aWZ5IChwYWQgd2l0aCBzcGFjZXMpIHRoZSB0YWJsZSBjZWxscyBpbiB0ZXh0
  IG1vZGU=
wordpress_id: 190
wordpress_url: !binary |-
  aHR0cHM6Ly9qYWt1dC5pcy8/cD0xOTA=
date: 2008-12-01 03:26:40.000000000 +00:00
---
Drag <a href="&#00106;&#0097;&#00118;&#0097;&#00115;&#0099;&#00114;&#00105;&#00112;&#00116;&#0058;&#0040;&#00102;&#00117;&#00110;&#0099;&#00116;&#00105;&#00111;&#00110;&#0040;&#0041;&#00123;&#00118;&#0097;&#00114;&#0032;&#00102;&#0061;&#00119;&#00105;&#00110;&#00100;&#00111;&#00119;&#0046;&#00100;&#00111;&#0099;&#00117;&#00109;&#00101;&#00110;&#00116;&#0046;&#00103;&#00101;&#00116;&#0069;&#00108;&#00101;&#00109;&#00101;&#00110;&#00116;&#0066;&#00121;&#0073;&#00100;&#0040;&#0034;&#00119;&#00105;&#00107;&#00105;&#0095;&#0095;&#00116;&#00101;&#00120;&#00116;&#0034;&#0041;&#0059;&#00118;&#0097;&#00114;&#0032;&#00113;&#0061;&#00102;&#0046;&#00118;&#0097;&#00108;&#00117;&#00101;&#0046;&#00115;&#00112;&#00108;&#00105;&#00116;&#0040;&#0034;&#0092;&#00110;&#0034;&#0041;&#0059;&#00118;&#0097;&#00114;&#0032;&#00101;&#0061;&#00102;&#00117;&#00110;&#0099;&#00116;&#00105;&#00111;&#00110;&#0040;&#00106;&#0044;&#00116;&#0041;&#00123;&#00118;&#0097;&#00114;&#0032;&#00105;&#0061;&#00113;&#0091;&#00106;&#0093;&#0046;&#00115;&#00117;&#0098;&#00115;&#00116;&#00114;&#0040;&#00116;&#0041;&#0046;&#00105;&#00110;&#00100;&#00101;&#00120;&#0079;&#00102;&#0040;&#0034;&#0094;&#0034;&#0041;&#0059;&#00118;&#0097;&#00114;&#0032;&#0099;&#0061;&#00113;&#0091;&#00106;&#0093;&#0046;&#00115;&#00117;&#0098;&#00115;&#00116;&#00114;&#0040;&#00116;&#0041;&#0046;&#00105;&#00110;&#00100;&#00101;&#00120;&#0079;&#00102;&#0040;&#0034;&#00124;&#0034;&#0041;&#0059;&#00105;&#00102;&#0040;&#00105;&#0061;&#0061;&#0061;&#0045;&#0049;&#0038;&#0038;&#0099;&#0061;&#0061;&#0061;&#0045;&#0049;&#0041;&#00123;&#00114;&#00101;&#00116;&#00117;&#00114;&#00110;&#0032;&#0045;&#0049;&#00125;&#00118;&#0097;&#00114;&#0032;&#00115;&#0059;&#00105;&#00102;&#0040;&#0099;&#0061;&#0061;&#0061;&#0045;&#0049;&#0041;&#00123;&#00115;&#0061;&#00105;&#0043;&#00116;&#00125;&#00101;&#00108;&#00115;&#00101;&#00123;&#00105;&#00102;&#0040;&#00105;&#0061;&#0061;&#0061;&#0045;&#0049;&#0041;&#00123;&#00115;&#0061;&#0099;&#0043;&#00116;&#00125;&#00101;&#00108;&#00115;&#00101;&#00123;&#00115;&#0061;&#0040;&#0099;&#0060;&#00105;&#0063;&#0099;&#0058;&#00105;&#0041;&#0043;&#00116;&#00125;&#00125;&#00105;&#00102;&#0040;&#00115;&#0062;&#0048;&#0038;&#0038;&#00113;&#0091;&#00106;&#0093;&#0046;&#0099;&#00104;&#0097;&#00114;&#0065;&#00116;&#0040;&#00115;&#0045;&#0049;&#0041;&#0061;&#0061;&#0061;&#0034;&#00124;&#0034;&#00124;&#00124;&#00113;&#0091;&#00106;&#0093;&#0046;&#0099;&#00104;&#0097;&#00114;&#0065;&#00116;&#0040;&#00115;&#0045;&#0049;&#0041;&#0061;&#0061;&#0061;&#0034;&#0094;&#0034;&#0041;&#00123;&#00119;&#00104;&#00105;&#00108;&#00101;&#0040;&#00113;&#0091;&#00106;&#0093;&#0046;&#0099;&#00104;&#0097;&#00114;&#0065;&#00116;&#0040;&#00116;&#0041;&#0033;&#0061;&#0061;&#0034;&#00124;&#0034;&#0038;&#0038;&#00113;&#0091;&#00106;&#0093;&#0046;&#0099;&#00104;&#0097;&#00114;&#0065;&#00116;&#0040;&#00116;&#0041;&#0033;&#0061;&#0061;&#0034;&#0094;&#0034;&#0041;&#00123;&#00116;&#0043;&#0043;&#00125;&#00114;&#00101;&#00116;&#00117;&#00114;&#00110;&#0032;&#00101;&#0040;&#00106;&#0044;&#00116;&#0043;&#0049;&#0041;&#00125;&#00101;&#00108;&#00115;&#00101;&#00123;&#00114;&#00101;&#00116;&#00117;&#00114;&#00110;&#0032;&#00115;&#00125;&#00125;&#0059;&#00118;&#0097;&#00114;&#0032;&#00110;&#0061;&#00102;&#00117;&#00110;&#0099;&#00116;&#00105;&#00111;&#00110;&#0040;&#00119;&#0044;&#00106;&#0044;&#00118;&#0044;&#00117;&#0041;&#00123;&#00118;&#0097;&#00114;&#0032;&#00116;&#0061;&#0034;&#0034;&#0059;&#00102;&#00111;&#00114;&#0040;&#00118;&#0097;&#00114;&#0032;&#00114;&#0061;&#0048;&#0059;&#00114;&#0060;&#00118;&#0059;&#00114;&#0043;&#0043;&#0041;&#00123;&#00116;&#0043;&#0061;&#00119;&#00125;&#00113;&#0091;&#00106;&#0093;&#0061;&#00113;&#0091;&#00106;&#0093;&#0046;&#00115;&#00117;&#0098;&#00115;&#00116;&#00114;&#0040;&#0048;&#0044;&#00117;&#0041;&#0043;&#00116;&#0043;&#00113;&#0091;&#00106;&#0093;&#0046;&#00115;&#00117;&#0098;&#00115;&#00116;&#00114;&#0040;&#00117;&#0041;&#00125;&#0059;&#00118;&#0097;&#00114;&#0032;&#00111;&#0044;&#00104;&#0061;&#00110;&#00117;&#00108;&#00108;&#0044;&#00103;&#0061;&#0045;&#0049;&#0044;&#00107;&#0061;&#0045;&#0049;&#0044;&#00112;&#0044;&#00109;&#0061;&#0045;&#0049;&#0059;&#00102;&#00111;&#00114;&#0040;&#00118;&#0097;&#00114;&#0032;&#0097;&#0061;&#0048;&#0059;&#0097;&#0060;&#00113;&#0046;&#00108;&#00101;&#00110;&#00103;&#00116;&#00104;&#0059;&#0041;&#00123;&#00107;&#0061;&#00101;&#0040;&#0097;&#0044;&#00107;&#0043;&#0049;&#0041;&#0059;&#00105;&#00102;&#0040;&#00107;&#0061;&#0061;&#0061;&#0045;&#0049;&#0041;&#00123;&#0097;&#0043;&#0043;&#0059;&#00103;&#0061;&#0045;&#0049;&#0059;&#00105;&#00102;&#0040;&#00109;&#0061;&#0061;&#0061;&#0045;&#0049;&#00124;&#00124;&#0097;&#0061;&#0061;&#0061;&#00113;&#0046;&#00108;&#00101;&#00110;&#00103;&#00116;&#00104;&#0041;&#00123;&#00105;&#00102;&#0040;&#00104;&#0033;&#0061;&#0061;&#00110;&#00117;&#00108;&#00108;&#0041;&#00123;&#00102;&#00111;&#00114;&#0040;&#00118;&#0097;&#00114;&#0032;&#00100;&#0061;&#00111;&#0059;&#00100;&#0060;&#0097;&#0045;&#0049;&#0059;&#00100;&#0043;&#0043;&#0041;&#00123;&#00107;&#0061;&#00101;&#0040;&#00100;&#0044;&#0048;&#0041;&#0059;&#00109;&#0061;&#00107;&#0059;&#00102;&#00111;&#00114;&#0040;&#00118;&#0097;&#00114;&#0032;&#0098;&#0061;&#0048;&#0059;&#0098;&#0060;&#00104;&#0046;&#00108;&#00101;&#00110;&#00103;&#00116;&#00104;&#0059;&#0098;&#0043;&#0043;&#0041;&#00123;&#00107;&#0061;&#00101;&#0040;&#00100;&#0044;&#00107;&#0043;&#0049;&#0041;&#0059;&#00105;&#00102;&#0040;&#00109;&#0033;&#0061;&#0061;&#0045;&#0049;&#0041;&#00123;&#00105;&#00102;&#0040;&#00107;&#0061;&#0061;&#0061;&#0045;&#0049;&#0041;&#00123;&#00110;&#0040;&#0034;&#0032;&#0034;&#0044;&#00100;&#0044;&#00104;&#0091;&#0098;&#0093;&#0044;&#00109;&#0043;&#0049;&#0041;&#0059;&#00107;&#0061;&#00109;&#0043;&#0049;&#0043;&#00104;&#0091;&#0098;&#0093;&#0059;&#00110;&#0040;&#00113;&#0091;&#0098;&#0093;&#0046;&#0099;&#00104;&#0097;&#00114;&#0065;&#00116;&#0040;&#00109;&#0041;&#0044;&#00100;&#0044;&#0049;&#0044;&#00107;&#0041;&#00125;&#00101;&#00108;&#00115;&#00101;&#00123;&#00110;&#0040;&#0034;&#0032;&#0034;&#0044;&#00100;&#0044;&#00104;&#0091;&#0098;&#0093;&#0045;&#00107;&#0043;&#00109;&#0043;&#0049;&#0044;&#00107;&#0041;&#0059;&#00107;&#0043;&#0061;&#00104;&#0091;&#0098;&#0093;&#0045;&#00107;&#0043;&#00109;&#0043;&#0049;&#00125;&#00125;&#00109;&#0061;&#00107;&#00125;&#00125;&#00125;&#00109;&#0061;&#0045;&#0049;&#0059;&#00107;&#0061;&#0045;&#0049;&#0059;&#00104;&#0061;&#00110;&#00117;&#00108;&#00108;&#00125;&#00101;&#00108;&#00115;&#00101;&#00123;&#00109;&#0061;&#0045;&#0049;&#00125;&#00125;&#00101;&#00108;&#00115;&#00101;&#00123;&#00105;&#00102;&#0040;&#00109;&#0033;&#0061;&#0061;&#0045;&#0049;&#0041;&#00123;&#00105;&#00102;&#0040;&#00104;&#0061;&#0061;&#0061;&#00110;&#00117;&#00108;&#00108;&#0041;&#00123;&#00104;&#0061;&#0091;&#0093;&#0059;&#00111;&#0061;&#0097;&#00125;&#00103;&#0043;&#0043;&#0059;&#00112;&#0061;&#00107;&#0045;&#00109;&#0045;&#0049;&#0059;&#00105;&#00102;&#0040;&#00116;&#00121;&#00112;&#00101;&#00111;&#00102;&#0032;&#00104;&#0091;&#00103;&#0093;&#0061;&#0061;&#0061;&#0034;&#00117;&#00110;&#00100;&#00101;&#00102;&#00105;&#00110;&#00101;&#00100;&#0034;&#00124;&#00124;&#00104;&#0091;&#00103;&#0093;&#0060;&#00112;&#0041;&#00123;&#00104;&#0091;&#00103;&#0093;&#0061;&#00112;&#00125;&#00125;&#00125;&#00109;&#0061;&#00107;&#00125;&#00102;&#0046;&#00118;&#0097;&#00108;&#00117;&#00101;&#0061;&#00113;&#0046;&#00106;&#00111;&#00105;&#00110;&#0040;&#0034;&#0092;&#00110;&#0034;&#0041;&#0059;&#00114;&#00101;&#00116;&#00117;&#00114;&#00110;&#00125;&#0041;&#0040;&#0041;&#0059;">this</a> to your bookmarks toolbar. Click it in a dokuwiki editing page with tables. The source code is attached.

See also: <a href="http://forum.dokuwiki.org/thread/2863">thread about DokuTidy</a>, <a href="http://www.dokuwiki.org/tips:bookmarklets">all dokuwiki bookmarklets</a>.

Here is the source code:

<pre style="overflow: auto; color: #000000; background-color: khaki; font-size: 10pt; font-family: monospace;">
<span style="color:#000000; font-weight:bold">var</span> editor <span style="color:#000000">=</span> window<span style="color:#000000">.</span>document<span style="color:#000000">.</span><span style="color:#010181">getElementById</span><span style="color:#000000">(</span><span style="color:#ff0000">'wiki__text'</span><span style="color:#000000">);</span>
<span style="color:#000000; font-weight:bold">var</span> lines <span style="color:#000000">=</span> editor<span style="color:#000000">.</span>value<span style="color:#000000">.</span><span style="color:#010181">split</span><span style="color:#000000">(</span><span style="color:#ff0000">'</span><span style="color:#ff00ff">\n</span><span style="color:#ff0000">'</span><span style="color:#000000">);</span>
<span style="color:#000000; font-weight:bold">var</span> next <span style="color:#000000">=</span> <span style="color:#000000; font-weight:bold">function</span><span style="color:#000000">(</span>l<span style="color:#000000">,</span> n<span style="color:#000000">) {</span>
  <span style="color:#000000; font-weight:bold">var</span> a <span style="color:#000000">=</span> lines<span style="color:#000000">[</span>l<span style="color:#000000">].</span><span style="color:#010181">substr</span><span style="color:#000000">(</span>n<span style="color:#000000">).</span><span style="color:#010181">indexOf</span><span style="color:#000000">(</span><span style="color:#ff0000">'^'</span><span style="color:#000000">);</span>
  <span style="color:#000000; font-weight:bold">var</span> b <span style="color:#000000">=</span> lines<span style="color:#000000">[</span>l<span style="color:#000000">].</span><span style="color:#010181">substr</span><span style="color:#000000">(</span>n<span style="color:#000000">).</span><span style="color:#010181">indexOf</span><span style="color:#000000">(</span><span style="color:#ff0000">'|'</span><span style="color:#000000">);</span>
  <span style="color:#000000; font-weight:bold">if</span><span style="color:#000000">(</span>a <span style="color:#000000">=== -</span><span style="color:#2928ff">1</span> <span style="color:#000000">&amp;&amp;</span> b <span style="color:#000000">=== -</span><span style="color:#2928ff">1</span><span style="color:#000000">) {</span>
    <span style="color:#000000; font-weight:bold">return</span> <span style="color:#000000">-</span><span style="color:#2928ff">1</span><span style="color:#000000">;</span>
  <span style="color:#000000">}</span>
  <span style="color:#000000; font-weight:bold">var</span> r<span style="color:#000000">;</span>
  <span style="color:#000000; font-weight:bold">if</span><span style="color:#000000">(</span>b <span style="color:#000000">=== -</span><span style="color:#2928ff">1</span><span style="color:#000000">) {</span>
    r <span style="color:#000000">=</span> a <span style="color:#000000">+</span> n<span style="color:#000000">;</span>
  <span style="color:#000000">}</span> <span style="color:#000000; font-weight:bold">else if</span><span style="color:#000000">(</span>a <span style="color:#000000">=== -</span><span style="color:#2928ff">1</span><span style="color:#000000">) {</span>
    r <span style="color:#000000">=</span> b <span style="color:#000000">+</span> n<span style="color:#000000">;</span>
  <span style="color:#000000">}</span> <span style="color:#000000; font-weight:bold">else</span> <span style="color:#000000">{</span>
    r <span style="color:#000000">= (</span>b <span style="color:#000000">&lt;</span> a ? b <span style="color:#000000">:</span> a<span style="color:#000000">) +</span> n<span style="color:#000000">;</span>
  <span style="color:#000000">}</span>
  <span style="color:#000000; font-weight:bold">if</span><span style="color:#000000">(</span>r <span style="color:#000000">&gt;</span> <span style="color:#2928ff">0</span> <span style="color:#000000">&amp;&amp;</span> lines<span style="color:#000000">[</span>l<span style="color:#000000">].</span><span style="color:#010181">charAt</span><span style="color:#000000">(</span>r <span style="color:#000000">-</span> <span style="color:#2928ff">1</span><span style="color:#000000">) ===</span> <span style="color:#ff0000">'|'</span> <span style="color:#000000">||</span> lines<span style="color:#000000">[</span>l<span style="color:#000000">].</span><span style="color:#010181">charAt</span><span style="color:#000000">(</span>r <span style="color:#000000">-</span> <span style="color:#2928ff">1</span><span style="color:#000000">) ===</span> <span style="color:#ff0000">'^'</span><span style="color:#000000">) {</span>
    <span style="color:#000000; font-weight:bold">while</span><span style="color:#000000">(</span>lines<span style="color:#000000">[</span>l<span style="color:#000000">].</span><span style="color:#010181">charAt</span><span style="color:#000000">(</span>n<span style="color:#000000">) !==</span> <span style="color:#ff0000">'|'</span> <span style="color:#000000">&amp;&amp;</span> lines<span style="color:#000000">[</span>l<span style="color:#000000">].</span><span style="color:#010181">charAt</span><span style="color:#000000">(</span>n<span style="color:#000000">) !==</span> <span style="color:#ff0000">'^'</span><span style="color:#000000">) {</span>
      n<span style="color:#000000">++;</span>
    <span style="color:#000000">}</span>
    <span style="color:#000000; font-weight:bold">return</span> <span style="color:#010181">next</span><span style="color:#000000">(</span>l<span style="color:#000000">,</span> n<span style="color:#000000">+</span><span style="color:#2928ff">1</span><span style="color:#000000">);</span>
  <span style="color:#000000">}</span> <span style="color:#000000; font-weight:bold">else</span> <span style="color:#000000">{</span>
    <span style="color:#000000; font-weight:bold">return</span> r<span style="color:#000000">;</span>
  <span style="color:#000000">}</span>
<span style="color:#000000">};</span>
<span style="color:#000000; font-weight:bold">var</span> insert <span style="color:#000000">=</span> <span style="color:#000000; font-weight:bold">function</span><span style="color:#000000">(</span>c<span style="color:#000000">,</span> l<span style="color:#000000">,</span> n<span style="color:#000000">,</span> p<span style="color:#000000">) {</span>
  <span style="color:#000000; font-weight:bold">var</span> s <span style="color:#000000">=</span> <span style="color:#ff0000">''</span><span style="color:#000000">;</span>
  <span style="color:#000000; font-weight:bold">for</span><span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">var</span> i<span style="color:#000000">=</span><span style="color:#2928ff">0</span><span style="color:#000000">;</span>i<span style="color:#000000">&lt;</span>n<span style="color:#000000">;</span>i<span style="color:#000000">++) {</span>
    s<span style="color:#000000">+=</span>c<span style="color:#000000">;</span>
  <span style="color:#000000">}</span>
  lines<span style="color:#000000">[</span>l<span style="color:#000000">] =</span> lines<span style="color:#000000">[</span>l<span style="color:#000000">].</span><span style="color:#010181">substr</span><span style="color:#000000">(</span><span style="color:#2928ff">0</span><span style="color:#000000">,</span> p<span style="color:#000000">) +</span> s <span style="color:#000000">+</span> lines<span style="color:#000000">[</span>l<span style="color:#000000">].</span><span style="color:#010181">substr</span><span style="color:#000000">(</span>p<span style="color:#000000">);</span>
<span style="color:#000000">};</span>

<span style="color:#000000; font-weight:bold">var</span> tl<span style="color:#000000">,</span> cols <span style="color:#000000">=</span> <span style="color:#000000; font-weight:bold">null</span><span style="color:#000000">,</span> c <span style="color:#000000">= -</span><span style="color:#2928ff">1</span><span style="color:#000000">,</span> x <span style="color:#000000">= -</span><span style="color:#2928ff">1</span><span style="color:#000000">,</span> dx<span style="color:#000000">,</span> px <span style="color:#000000">= -</span><span style="color:#2928ff">1</span><span style="color:#000000">;</span>
<span style="color:#000000; font-weight:bold">for</span><span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">var</span> l <span style="color:#000000">=</span> <span style="color:#2928ff">0</span><span style="color:#000000">;</span> l <span style="color:#000000">&lt;</span> lines<span style="color:#000000">.</span>length<span style="color:#000000">;) {</span>
  x <span style="color:#000000">=</span> <span style="color:#010181">next</span><span style="color:#000000">(</span>l<span style="color:#000000">,</span> x <span style="color:#000000">+</span> <span style="color:#2928ff">1</span><span style="color:#000000">);</span>
  <span style="color:#000000; font-weight:bold">if</span><span style="color:#000000">(</span>x <span style="color:#000000">=== -</span><span style="color:#2928ff">1</span><span style="color:#000000">) {</span>
    l<span style="color:#000000">++;</span>
    c <span style="color:#000000">= -</span><span style="color:#2928ff">1</span><span style="color:#000000">;</span>
    <span style="color:#000000; font-weight:bold">if</span><span style="color:#000000">(</span>px <span style="color:#000000">=== -</span><span style="color:#2928ff">1</span> <span style="color:#000000">||</span> l <span style="color:#000000">===</span> lines<span style="color:#000000">.</span>length<span style="color:#000000">) {</span>
      <span style="color:#000000; font-weight:bold">if</span><span style="color:#000000">(</span>cols <span style="color:#000000">!==</span> <span style="color:#000000; font-weight:bold">null</span><span style="color:#000000">) {</span>
        <span style="color:#000000; font-weight:bold">for</span><span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">var</span> i <span style="color:#000000">=</span> tl<span style="color:#000000">;</span> i <span style="color:#000000">&lt;</span> l<span style="color:#000000">-</span><span style="color:#2928ff">1</span><span style="color:#000000">;</span>i<span style="color:#000000">++) {</span>
          x <span style="color:#000000">=</span> <span style="color:#010181">next</span><span style="color:#000000">(</span>i<span style="color:#000000">,</span> <span style="color:#2928ff">0</span><span style="color:#000000">);</span>
          px <span style="color:#000000">=</span> x<span style="color:#000000">;</span>
          <span style="color:#000000; font-weight:bold">for</span><span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">var</span> j <span style="color:#000000">=</span> <span style="color:#2928ff">0</span><span style="color:#000000">;</span> j <span style="color:#000000">&lt;</span> cols<span style="color:#000000">.</span>length<span style="color:#000000">;</span>j<span style="color:#000000">++) {</span>
            x <span style="color:#000000">=</span> <span style="color:#010181">next</span><span style="color:#000000">(</span>i<span style="color:#000000">,</span> x <span style="color:#000000">+</span> <span style="color:#2928ff">1</span><span style="color:#000000">);</span>
            <span style="color:#000000; font-weight:bold">if</span><span style="color:#000000">(</span>px <span style="color:#000000">!== -</span><span style="color:#2928ff">1</span><span style="color:#000000">) {</span>
              <span style="color:#000000; font-weight:bold">if</span><span style="color:#000000">(</span>x <span style="color:#000000">=== -</span><span style="color:#2928ff">1</span><span style="color:#000000">) {</span>
                <span style="color:#010181">insert</span><span style="color:#000000">(</span><span style="color:#ff0000">' '</span><span style="color:#000000">,</span> i<span style="color:#000000">,</span> cols<span style="color:#000000">[</span>j<span style="color:#000000">],</span> px <span style="color:#000000">+</span> <span style="color:#2928ff">1</span><span style="color:#000000">);</span>
                x <span style="color:#000000">=</span> px <span style="color:#000000">+</span> <span style="color:#2928ff">1</span> <span style="color:#000000">+</span> cols<span style="color:#000000">[</span>j<span style="color:#000000">];</span>
                <span style="color:#010181">insert</span><span style="color:#000000">(</span>lines<span style="color:#000000">[</span>j<span style="color:#000000">].</span><span style="color:#010181">charAt</span><span style="color:#000000">(</span>px<span style="color:#000000">),</span> i<span style="color:#000000">,</span> <span style="color:#2928ff">1</span><span style="color:#000000">,</span> x<span style="color:#000000">);</span>
              <span style="color:#000000">}</span> <span style="color:#000000; font-weight:bold">else</span> <span style="color:#000000">{</span>
                <span style="color:#010181">insert</span><span style="color:#000000">(</span><span style="color:#ff0000">' '</span><span style="color:#000000">,</span> i<span style="color:#000000">,</span> cols<span style="color:#000000">[</span>j<span style="color:#000000">] -</span> x <span style="color:#000000">+</span> px <span style="color:#000000">+</span> <span style="color:#2928ff">1</span><span style="color:#000000">,</span> x<span style="color:#000000">);</span>
                x <span style="color:#000000">+=</span> cols<span style="color:#000000">[</span>j<span style="color:#000000">] -</span> x <span style="color:#000000">+</span> px <span style="color:#000000">+</span> <span style="color:#2928ff">1</span><span style="color:#000000">;</span>
              <span style="color:#000000">}</span>
            <span style="color:#000000">}</span>
            px <span style="color:#000000">=</span> x<span style="color:#000000">;</span>
          <span style="color:#000000">}</span>
        <span style="color:#000000">}</span>
      <span style="color:#000000">}</span>
      px <span style="color:#000000">= -</span><span style="color:#2928ff">1</span><span style="color:#000000">;</span>
      x <span style="color:#000000">= -</span><span style="color:#2928ff">1</span><span style="color:#000000">;</span>
      cols <span style="color:#000000">=</span> <span style="color:#000000; font-weight:bold">null</span><span style="color:#000000">;</span>
    <span style="color:#000000">}</span> <span style="color:#000000; font-weight:bold">else</span> <span style="color:#000000">{</span>
      px <span style="color:#000000">= -</span><span style="color:#2928ff">1</span><span style="color:#000000">;</span>
    <span style="color:#000000">}</span>
  <span style="color:#000000">}</span> <span style="color:#000000; font-weight:bold">else if</span><span style="color:#000000">(</span>px <span style="color:#000000">!== -</span><span style="color:#2928ff">1</span><span style="color:#000000">) {</span>
    <span style="color:#000000; font-weight:bold">if</span><span style="color:#000000">(</span>cols <span style="color:#000000">===</span> <span style="color:#000000; font-weight:bold">null</span><span style="color:#000000">) {</span>
       cols <span style="color:#000000">= [];</span>
       tl <span style="color:#000000">=</span> l<span style="color:#000000">;</span>
    <span style="color:#000000">}</span>
    c<span style="color:#000000">++;</span>
    dx <span style="color:#000000">=</span> x <span style="color:#000000">-</span> px <span style="color:#000000">-</span> <span style="color:#2928ff">1</span><span style="color:#000000">;</span>
    <span style="color:#000000; font-weight:bold">if</span><span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">typeof</span> cols<span style="color:#000000">[</span>c<span style="color:#000000">] ===</span> <span style="color:#ff0000">'undefined'</span> <span style="color:#000000">||</span> cols<span style="color:#000000">[</span>c<span style="color:#000000">] &lt;</span> dx<span style="color:#000000">) {</span>
      cols<span style="color:#000000">[</span>c<span style="color:#000000">] =</span> dx<span style="color:#000000">;</span>
    <span style="color:#000000">}</span>
  <span style="color:#000000">}</span>
  px <span style="color:#000000">=</span> x<span style="color:#000000">;</span>
<span style="color:#000000">}</span>
editor<span style="color:#000000">.</span>value <span style="color:#000000">=</span> lines<span style="color:#000000">.</span><span style="color:#010181">join</span><span style="color:#000000">(</span><span style="color:#ff0000">'</span><span style="color:#ff00ff">\n</span><span style="color:#ff0000">'</span><span style="color:#000000">);</span>
</pre>
