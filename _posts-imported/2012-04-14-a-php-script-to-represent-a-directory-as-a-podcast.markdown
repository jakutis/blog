---
layout: post
title: !binary |-
  YSBwaHAgc2NyaXB0IHRvIHJlcHJlc2VudCBhIGRpcmVjdG9yeSBhcyBhIHBv
  ZGNhc3Q=
wordpress_id: 521
wordpress_url: !binary |-
  aHR0cHM6Ly9qYWt1dC5pcy8/cD01MjE=
date: 2012-04-14 22:47:34.000000000 +00:00
---
This recursively finds all files in the given directory, sorts them by last modification date and generates an RSS/Atom feed for your consumption.

<pre style="overflow: auto; color: #000000; background-color: khaki; font-size: 10pt; font-family: monospace;">
<span style="color:#000000">&lt;</span>?php

<span style="color:#000000; font-weight:bold">$dir</span> <span style="color:#000000">=</span> <span style="color:#bf0303">'/path/to/your/directory/of/for/example/podcasts'</span><span style="color:#000000">;</span>
<span style="color:#000000; font-weight:bold">$urlDir</span> <span style="color:#000000">=</span> <span style="color:#bf0303">'http://your.hostname.example.org/path/where/the/files/are/available'</span><span style="color:#000000">;</span>
<span style="color:#000000; font-weight:bold">$link</span> <span style="color:#000000">=</span> <span style="color:#bf0303">'http://your.hostname.example.org/path/to/this/php/script.php'</span><span style="color:#000000">;</span>
<span style="color:#000000; font-weight:bold">$limit</span> <span style="color:#000000">=</span> <span style="color:#b07e00">20</span><span style="color:#000000">;</span>
<span style="color:#010181">ini_set</span><span style="color:#000000">(</span><span style="color:#bf0303">'error_reporting'</span><span style="color:#000000">,</span> E_ALL<span style="color:#000000">);</span>
<span style="color:#010181">ini_set</span><span style="color:#000000">(</span><span style="color:#bf0303">'display_errors'</span><span style="color:#000000">,</span> <span style="color:#bf0303">'stdout'</span><span style="color:#000000">);</span>

<span style="color:#000000; font-weight:bold">function</span> <span style="color:#010181">date_rfc2822</span><span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">$time</span><span style="color:#000000">) {</span>
  <span style="color:#000000; font-weight:bold">return</span> <span style="color:#010181">gmdate</span><span style="color:#000000">(</span><span style="color:#bf0303">'D, d M Y H:i:s O'</span><span style="color:#000000">,</span> <span style="color:#000000; font-weight:bold">$time</span><span style="color:#000000">);</span>
<span style="color:#000000">}</span>

<span style="color:#000000; font-weight:bold">function</span> <span style="color:#010181">rss</span><span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">$data</span><span style="color:#000000">) {</span>
    <span style="color:#000000; font-weight:bold">$body</span> <span style="color:#000000">=</span> <span style="color:#bf0303">'&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;'</span><span style="color:#000000">;</span>
    <span style="color:#000000; font-weight:bold">$body</span> <span style="color:#000000">.=</span> <span style="color:#bf0303">'&lt;rss xmlns:media=&quot;http://search.yahoo.com/mrss/&quot; xmlns:content=&quot;http://purl.org/rss/1.0/modules/content/&quot; version=&quot;2.0&quot; xmlns:atom=&quot;http://www.w3.org/2005/Atom&quot; xml:base=&quot;'</span> <span style="color:#000000">.</span> <span style="color:#010181">htmlentities</span><span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">$data</span><span style="color:#000000">[</span><span style="color:#bf0303">'baseurl'</span><span style="color:#000000">],</span> ENT_COMPAT<span style="color:#000000">,</span> <span style="color:#bf0303">'utf-8'</span><span style="color:#000000">) .</span> <span style="color:#bf0303">'&quot;&gt;&lt;channel&gt;'</span><span style="color:#000000">;</span>
    <span style="color:#000000; font-weight:bold">$body</span> <span style="color:#000000">.=</span> <span style="color:#bf0303">'&lt;title&gt;'</span> <span style="color:#000000">.</span> <span style="color:#010181">htmlentities</span><span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">$data</span><span style="color:#000000">[</span><span style="color:#bf0303">'title'</span><span style="color:#000000">],</span> ENT_COMPAT<span style="color:#000000">,</span> <span style="color:#bf0303">'utf-8'</span><span style="color:#000000">) .</span> <span style="color:#bf0303">'&lt;/title&gt;'</span><span style="color:#000000">;</span>
    <span style="color:#000000; font-weight:bold">$body</span> <span style="color:#000000">.=</span> <span style="color:#bf0303">'&lt;link&gt;'</span> <span style="color:#000000">.</span> <span style="color:#010181">htmlentities</span><span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">$data</span><span style="color:#000000">[</span><span style="color:#bf0303">'link'</span><span style="color:#000000">],</span> ENT_COMPAT<span style="color:#000000">,</span> <span style="color:#bf0303">'utf-8'</span><span style="color:#000000">) .</span> <span style="color:#bf0303">'&lt;/link&gt;'</span><span style="color:#000000">;</span>
    <span style="color:#000000; font-weight:bold">$body</span> <span style="color:#000000">.=</span> <span style="color:#bf0303">'&lt;description&gt;'</span> <span style="color:#000000">.</span> <span style="color:#010181">htmlentities</span><span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">$data</span><span style="color:#000000">[</span><span style="color:#bf0303">'description'</span><span style="color:#000000">],</span> ENT_COMPAT<span style="color:#000000">,</span> <span style="color:#bf0303">'utf-8'</span><span style="color:#000000">) .</span> <span style="color:#bf0303">'&lt;/description&gt;'</span><span style="color:#000000">;</span>
    <span style="color:#000000; font-weight:bold">$body</span> <span style="color:#000000">.=</span> <span style="color:#bf0303">'&lt;language&gt;'</span> <span style="color:#000000">.</span> <span style="color:#010181">htmlentities</span><span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">$data</span><span style="color:#000000">[</span><span style="color:#bf0303">'lang'</span><span style="color:#000000">],</span> ENT_COMPAT<span style="color:#000000">,</span> <span style="color:#bf0303">'utf-8'</span><span style="color:#000000">) .</span> <span style="color:#bf0303">'&lt;/language&gt;'</span><span style="color:#000000">;</span>
    <span style="color:#000000; font-weight:bold">$body</span> <span style="color:#000000">.=</span> <span style="color:#bf0303">'&lt;atom:link href=&quot;'</span> <span style="color:#000000">.</span> <span style="color:#010181">htmlentities</span><span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">$data</span><span style="color:#000000">[</span><span style="color:#bf0303">'linkfeed'</span><span style="color:#000000">],</span> ENT_COMPAT<span style="color:#000000">,</span> <span style="color:#bf0303">'utf-8'</span><span style="color:#000000">) .</span> <span style="color:#bf0303">'&quot; rel=&quot;self&quot; type=&quot;application/rss+xml&quot; /&gt;'</span><span style="color:#000000">;</span>
    <span style="color:#000000; font-weight:bold">foreach</span> <span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">$data</span><span style="color:#000000">[</span><span style="color:#bf0303">'items'</span><span style="color:#000000">]</span> <span style="color:#000000; font-weight:bold">as</span> <span style="color:#000000; font-weight:bold">$i</span> <span style="color:#000000">=&gt;</span> <span style="color:#000000; font-weight:bold">$item</span><span style="color:#000000">) {</span>
        <span style="color:#000000; font-weight:bold">$link</span> <span style="color:#000000">=</span> <span style="color:#010181">htmlentities</span><span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">$item</span><span style="color:#000000">[</span><span style="color:#bf0303">'link'</span><span style="color:#000000">],</span> ENT_COMPAT<span style="color:#000000">,</span> <span style="color:#bf0303">'utf-8'</span><span style="color:#000000">);</span>
        <span style="color:#000000; font-weight:bold">$descr</span> <span style="color:#000000">=</span> <span style="color:#000000; font-weight:bold">$item</span><span style="color:#000000">[</span><span style="color:#bf0303">'description'</span><span style="color:#000000">];</span>
        <span style="color:#000000; font-weight:bold">$body</span> <span style="color:#000000">.=</span> <span style="color:#bf0303">'&lt;item&gt;'</span><span style="color:#000000">;</span>
        <span style="color:#000000; font-weight:bold">$body</span> <span style="color:#000000">.=</span> <span style="color:#bf0303">'&lt;title&gt;'</span> <span style="color:#000000">.</span> <span style="color:#010181">htmlentities</span><span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">$item</span><span style="color:#000000">[</span><span style="color:#bf0303">'title'</span><span style="color:#000000">],</span> ENT_COMPAT<span style="color:#000000">,</span> <span style="color:#bf0303">'utf-8'</span><span style="color:#000000">) .</span> <span style="color:#bf0303">'&lt;/title&gt;'</span><span style="color:#000000">;</span>
        <span style="color:#000000; font-weight:bold">$body</span> <span style="color:#000000">.=</span> <span style="color:#bf0303">'&lt;link&gt;'</span> <span style="color:#000000">.</span> <span style="color:#000000; font-weight:bold">$link</span> <span style="color:#000000">.</span> <span style="color:#bf0303">'&lt;/link&gt;'</span><span style="color:#000000">;</span>
        <span style="color:#000000; font-weight:bold">$body</span> <span style="color:#000000">.=</span> <span style="color:#bf0303">'&lt;guid&gt;'</span> <span style="color:#000000">.</span> <span style="color:#000000; font-weight:bold">$link</span> <span style="color:#000000">.</span> <span style="color:#bf0303">'&lt;/guid&gt;'</span><span style="color:#000000">;</span>
        <span style="color:#000000; font-weight:bold">foreach</span><span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">$item</span><span style="color:#000000">[</span><span style="color:#bf0303">'enclosures'</span><span style="color:#000000">]</span> <span style="color:#000000; font-weight:bold">as</span> <span style="color:#000000; font-weight:bold">$enclosure</span><span style="color:#000000">) {</span>
            <span style="color:#000000; font-weight:bold">$body</span> <span style="color:#000000">.=</span> <span style="color:#bf0303">'&lt;enclosure length=&quot;'</span> <span style="color:#000000">.</span> <span style="color:#000000; font-weight:bold">$enclosure</span><span style="color:#000000">[</span><span style="color:#bf0303">'length'</span><span style="color:#000000">] .</span> <span style="color:#bf0303">'&quot; type=&quot;'</span> <span style="color:#000000">.</span> <span style="color:#000000; font-weight:bold">$enclosure</span><span style="color:#000000">[</span><span style="color:#bf0303">'contentType'</span><span style="color:#000000">] .</span> <span style="color:#bf0303">'&quot; url=&quot;'</span> <span style="color:#000000">.</span> <span style="color:#010181">htmlentities</span><span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">$enclosure</span><span style="color:#000000">[</span><span style="color:#bf0303">'url'</span><span style="color:#000000">],</span> ENT_COMPAT<span style="color:#000000">,</span> <span style="color:#bf0303">'utf-8'</span><span style="color:#000000">) .</span> <span style="color:#bf0303">'&quot; /&gt;'</span><span style="color:#000000">;</span>
            <span style="color:#000000; font-weight:bold">$body</span> <span style="color:#000000">.=</span> <span style="color:#bf0303">'&lt;media:content fileSize=&quot;'</span> <span style="color:#000000">.</span> <span style="color:#000000; font-weight:bold">$enclosure</span><span style="color:#000000">[</span><span style="color:#bf0303">'length'</span><span style="color:#000000">] .</span> <span style="color:#bf0303">'&quot; type=&quot;'</span> <span style="color:#000000">.</span> <span style="color:#000000; font-weight:bold">$enclosure</span><span style="color:#000000">[</span><span style="color:#bf0303">'contentType'</span><span style="color:#000000">] .</span> <span style="color:#bf0303">'&quot; url=&quot;'</span> <span style="color:#000000">.</span> <span style="color:#010181">htmlentities</span><span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">$enclosure</span><span style="color:#000000">[</span><span style="color:#bf0303">'url'</span><span style="color:#000000">],</span> ENT_COMPAT<span style="color:#000000">,</span> <span style="color:#bf0303">'utf-8'</span><span style="color:#000000">) .</span> <span style="color:#bf0303">'&quot; /&gt;'</span><span style="color:#000000">;</span>
        <span style="color:#000000">}</span>
        <span style="color:#000000; font-weight:bold">$body</span> <span style="color:#000000">.=</span> <span style="color:#bf0303">'&lt;description&gt;&lt;![CDATA['</span> <span style="color:#000000">.</span> <span style="color:#010181">strip_tags</span><span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">$descr</span><span style="color:#000000">) .</span> <span style="color:#bf0303">']]&gt;&lt;/description&gt;'</span><span style="color:#000000">;</span>
        <span style="color:#000000; font-weight:bold">$body</span> <span style="color:#000000">.=</span> <span style="color:#bf0303">'&lt;content:encoded&gt;&lt;![CDATA['</span> <span style="color:#000000">.</span> <span style="color:#000000; font-weight:bold">$descr</span> <span style="color:#000000">.</span> <span style="color:#bf0303">']]&gt;&lt;/content:encoded&gt;'</span><span style="color:#000000">;</span>
        <span style="color:#000000; font-weight:bold">$body</span> <span style="color:#000000">.=</span> <span style="color:#bf0303">'&lt;pubDate&gt;'</span> <span style="color:#000000">.</span> <span style="color:#010181">date_rfc2822</span><span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">$item</span><span style="color:#000000">[</span><span style="color:#bf0303">'pubdate'</span><span style="color:#000000">]) .</span> <span style="color:#bf0303">'&lt;/pubDate&gt;'</span><span style="color:#000000">;</span>
        <span style="color:#000000; font-weight:bold">$body</span> <span style="color:#000000">.=</span> <span style="color:#bf0303">'&lt;/item&gt;'</span><span style="color:#000000">;</span>
    <span style="color:#000000">}</span>
    <span style="color:#000000; font-weight:bold">return</span> <span style="color:#000000; font-weight:bold">$body</span> <span style="color:#000000">.</span> <span style="color:#bf0303">'&lt;/channel&gt;&lt;/rss&gt;'</span><span style="color:#000000">;</span>
<span style="color:#000000">}</span>

<span style="color:#000000; font-weight:bold">function</span> <span style="color:#010181">find</span><span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">$dir</span><span style="color:#000000">, &amp;</span><span style="color:#000000; font-weight:bold">$list</span><span style="color:#000000">) {</span>
    <span style="color:#000000; font-weight:bold">if</span><span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">$handle</span> <span style="color:#000000">=</span> <span style="color:#010181">opendir</span><span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">$dir</span><span style="color:#000000">)) {</span>
        <span style="color:#000000; font-weight:bold">while</span><span style="color:#000000">(</span>false <span style="color:#000000">!== (</span><span style="color:#000000; font-weight:bold">$entry</span> <span style="color:#000000">=</span> <span style="color:#010181">readdir</span><span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">$handle</span><span style="color:#000000">))) {</span>
            <span style="color:#000000; font-weight:bold">if</span><span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">$entry</span> <span style="color:#000000">!=</span> <span style="color:#bf0303">'.'</span> <span style="color:#000000">&amp;&amp;</span> <span style="color:#000000; font-weight:bold">$entry</span> <span style="color:#000000">!=</span> <span style="color:#bf0303">'..'</span><span style="color:#000000">) {</span>
                <span style="color:#000000; font-weight:bold">$path</span> <span style="color:#000000">=</span> <span style="color:#000000; font-weight:bold">$dir</span> <span style="color:#000000">.</span> <span style="color:#bf0303">'/'</span> <span style="color:#000000">.</span> <span style="color:#000000; font-weight:bold">$entry</span><span style="color:#000000">;</span>
                <span style="color:#000000; font-weight:bold">if</span><span style="color:#000000">(</span><span style="color:#010181">is_dir</span><span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">$path</span><span style="color:#000000">)) {</span>
                    <span style="color:#010181">find</span><span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">$path</span><span style="color:#000000">,</span> <span style="color:#000000; font-weight:bold">$list</span><span style="color:#000000">);</span>
                <span style="color:#000000">}</span> <span style="color:#000000; font-weight:bold">else</span> <span style="color:#000000">{</span>
                    <span style="color:#000000; font-weight:bold">$list</span><span style="color:#000000">[</span><span style="color:#000000; font-weight:bold">$path</span><span style="color:#000000">] =</span> <span style="color:#010181">filemtime</span><span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">$path</span><span style="color:#000000">);</span>
                <span style="color:#000000">}</span>
            <span style="color:#000000">}</span>
        <span style="color:#000000">}</span>
        <span style="color:#010181">closedir</span><span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">$handle</span><span style="color:#000000">);</span>
    <span style="color:#000000">}</span>
<span style="color:#000000">}</span>

<span style="color:#000000; font-weight:bold">$found</span> <span style="color:#000000">=</span> <span style="color:#000000; font-weight:bold">array</span><span style="color:#000000">();</span>
<span style="color:#010181">find</span><span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">$dir</span><span style="color:#000000">,</span> <span style="color:#000000; font-weight:bold">$found</span><span style="color:#000000">);</span>
<span style="color:#010181">arsort</span><span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">$found</span><span style="color:#000000">);</span>
<span style="color:#000000; font-weight:bold">$modified</span> <span style="color:#000000">=</span> <span style="color:#010181">current</span><span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">$found</span><span style="color:#000000">);</span>
<span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">isset</span> <span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">$_SERVER</span><span style="color:#000000">[</span><span style="color:#bf0303">'HTTP_IF_MODIFIED_SINCE'</span><span style="color:#000000">]) &amp;&amp;</span> <span style="color:#000000; font-weight:bold">$modified</span> <span style="color:#000000">&lt;=</span> <span style="color:#010181">strtotime</span><span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">$_SERVER</span><span style="color:#000000">[</span><span style="color:#bf0303">'HTTP_IF_MODIFIED_SINCE'</span><span style="color:#000000">])) {</span>
    <span style="color:#010181">header</span><span style="color:#000000">(</span><span style="color:#bf0303">'HTTP/1.0 304 Not Modified'</span><span style="color:#000000">);</span>
<span style="color:#000000">}</span> <span style="color:#000000; font-weight:bold">else</span> <span style="color:#000000">{</span>
    <span style="color:#010181">header</span><span style="color:#000000">(</span><span style="color:#bf0303">'Content-Type: application/rss+xml; charset=UTF-8'</span><span style="color:#000000">);</span>
    <span style="color:#010181">header</span><span style="color:#000000">(</span><span style="color:#bf0303">'Last-Modified: '</span> <span style="color:#000000">.</span> <span style="color:#010181">date_rfc2822</span><span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">$modified</span><span style="color:#000000">));</span>
    <span style="color:#000000; font-weight:bold">$data</span> <span style="color:#000000">=</span> <span style="color:#000000; font-weight:bold">array</span><span style="color:#000000">(</span>
        <span style="color:#bf0303">'baseurl'</span> <span style="color:#000000">=&gt;</span> <span style="color:#000000; font-weight:bold">$link</span><span style="color:#000000">,</span>
        <span style="color:#bf0303">'title'</span> <span style="color:#000000">=&gt;</span> <span style="color:#bf0303">'Latest files from '</span> <span style="color:#000000">.</span> <span style="color:#000000; font-weight:bold">$dir</span><span style="color:#000000">,</span>
        <span style="color:#bf0303">'description'</span> <span style="color:#000000">=&gt;</span> <span style="color:#bf0303">'Latest files from '</span> <span style="color:#000000">.</span> <span style="color:#000000; font-weight:bold">$dir</span><span style="color:#000000">,</span>
        <span style="color:#bf0303">'link'</span> <span style="color:#000000">=&gt;</span> <span style="color:#000000; font-weight:bold">$link</span><span style="color:#000000">,</span>
        <span style="color:#bf0303">'lang'</span> <span style="color:#000000">=&gt;</span> <span style="color:#bf0303">'en'</span><span style="color:#000000">,</span>
        <span style="color:#bf0303">'linkfeed'</span> <span style="color:#000000">=&gt;</span> <span style="color:#000000; font-weight:bold">$link</span><span style="color:#000000">,</span>
        <span style="color:#bf0303">'items'</span> <span style="color:#000000">=&gt;</span> <span style="color:#000000; font-weight:bold">array</span><span style="color:#000000">()</span>
    <span style="color:#000000">);</span>
    <span style="color:#000000; font-weight:bold">$i</span> <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span>
    <span style="color:#000000; font-weight:bold">foreach</span><span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">$found</span> <span style="color:#000000; font-weight:bold">as</span> <span style="color:#000000; font-weight:bold">$fullpath</span> <span style="color:#000000">=&gt;</span> <span style="color:#000000; font-weight:bold">$lastModified</span><span style="color:#000000">) {</span>
        <span style="color:#000000; font-weight:bold">if</span><span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">$i</span> <span style="color:#000000">===</span> <span style="color:#000000; font-weight:bold">$limit</span><span style="color:#000000">) {</span>
            <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
        <span style="color:#000000">}</span>
        <span style="color:#000000; font-weight:bold">$i</span>++<span style="color:#000000">;</span>
        <span style="color:#000000; font-weight:bold">$path</span> <span style="color:#000000">=</span> <span style="color:#010181">substr</span><span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">$fullpath</span><span style="color:#000000">,</span> <span style="color:#010181">strlen</span><span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">$dir</span><span style="color:#000000">));</span>
        <span style="color:#000000; font-weight:bold">$url</span> <span style="color:#000000">=</span> <span style="color:#000000; font-weight:bold">$urlDir</span> <span style="color:#000000">.</span> <span style="color:#010181">str_replace</span><span style="color:#000000">(</span><span style="color:#bf0303">'%2F'</span><span style="color:#000000">,</span> <span style="color:#bf0303">'/'</span><span style="color:#000000">,</span> <span style="color:#010181">rawurlencode</span><span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">$path</span><span style="color:#000000">));</span>
        <span style="color:#000000; font-weight:bold">$data</span><span style="color:#000000">[</span><span style="color:#bf0303">'items'</span><span style="color:#000000">][] =</span> <span style="color:#000000; font-weight:bold">array</span><span style="color:#000000">(</span>
            <span style="color:#bf0303">'link'</span> <span style="color:#000000">=&gt;</span> <span style="color:#000000; font-weight:bold">$url</span><span style="color:#000000">,</span>
            <span style="color:#bf0303">'description'</span> <span style="color:#000000">=&gt;</span> <span style="color:#000000; font-weight:bold">$path</span><span style="color:#000000">,</span>
            <span style="color:#bf0303">'title'</span> <span style="color:#000000">=&gt;</span> <span style="color:#000000; font-weight:bold">$path</span><span style="color:#000000">,</span>
            <span style="color:#bf0303">'pubdate'</span> <span style="color:#000000">=&gt;</span> <span style="color:#000000; font-weight:bold">$lastModified</span><span style="color:#000000">,</span>
            <span style="color:#bf0303">'enclosures'</span> <span style="color:#000000">=&gt;</span> <span style="color:#000000; font-weight:bold">array</span><span style="color:#000000">(</span>
                <span style="color:#000000; font-weight:bold">array</span><span style="color:#000000">(</span>
                    <span style="color:#bf0303">'length'</span> <span style="color:#000000">=&gt;</span> <span style="color:#010181">filesize</span><span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">$fullpath</span><span style="color:#000000">),</span>
                    <span style="color:#bf0303">'contentType'</span> <span style="color:#000000">=&gt;</span> <span style="color:#010181">mime_content_type</span><span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">$fullpath</span><span style="color:#000000">),</span>
                    <span style="color:#bf0303">'url'</span> <span style="color:#000000">=&gt;</span> <span style="color:#000000; font-weight:bold">$url</span>
                <span style="color:#000000">)</span>
            <span style="color:#000000">)</span>
        <span style="color:#000000">);</span>
    <span style="color:#000000">}</span>
    <span style="color:#000000; font-weight:bold">echo</span> <span style="color:#010181">rss</span><span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">$data</span><span style="color:#000000">);</span>
<span style="color:#000000">}</span>
</pre>
